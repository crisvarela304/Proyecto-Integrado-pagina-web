{% extends "admin/base_site.html" %}
{% load i18n static admin_urls %}

{% block breadcrumbs %}
<ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'admin:index' %}">{% trans 'Home' %}</a></li>
    <li class="breadcrumb-item"><a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a></li>
    <li class="breadcrumb-item"><a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a></li>
    <li class="breadcrumb-item active">Importar Alumnos</li>
</ol>
{% endblock %}

{% block content %}
<div class="col-12">
    <div class="card card-primary card-outline">
        <div class="card-header">
            <h3 class="card-title">Carga Masiva de Estudiantes</h3>
        </div>

        <form action="." method="post" enctype="multipart/form-data" class="show-loading">
            {% csrf_token %}
            <div class="card-body">
                {% if form.errors %}
                <div class="alert alert-danger">
                    {% if form.errors|length == 1 %}
                    Por favor corrija el error abajo.
                    {% else %}
                    Por favor corrija los errores abajo.
                    {% endif %}
                </div>
                {% endif %}

                <div class="row">
                    <div class="col-md-12">
                        <div class="callout callout-info">
                            <h5><i class="fas fa-info-circle"></i> Instrucciones</h5>
                            <p>Sube un archivo Excel (.xlsx) o CSV con la lista de estudiantes.</p>
                            <p>Columnas requeridas: <strong>RUT, Nombres, Apellidos</strong>.</p>
                        </div>
                    </div>
                </div>

                {{ form.as_p }}
            </div>

            <div class="card-footer">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-upload me-1"></i> Importar Estudiantes
                </button>
                <a href="{% url 'admin:usuarios_perfilusuario_changelist' %}" class="btn btn-secondary float-right">
                    Cancelar
                </a>
            </div>
        </form>

    </div>
</div>
{% endblock %}